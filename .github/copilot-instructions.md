# Copilot Instructions – SvelteKit PWA Test Project

## Project Goal

This project is a test Progressive Web App (PWA) built with SvelteKit and vite-plugin-pwa.

The goal is to test and validate:

- PWA installability
- Offline support
- Service worker caching
- Offline fallback page
- Cache strategies (Cache First, Network First)
- Mobile-first behavior

This is an offline-first PWA experiment.

---

## Tech Stack

Framework: SvelteKit (latest version)  
Language: TypeScript  
Build tool: Vite  
PWA plugin: vite-plugin-pwa  
Service Worker: Workbox (auto-generated by vite-plugin-pwa)

---

## Core Rules

Copilot must follow these rules:

- Always use SvelteKit best practices
- Always use vite-plugin-pwa for PWA functionality
- Always write TypeScript
- Always use async/await instead of .then()

Do NOT introduce other PWA libraries.

Do NOT create custom service-worker.ts.

---

## Service Worker Rules

Service worker must be auto-generated by vite-plugin-pwa.

Always configure service worker inside vite.config.ts using workbox option.

Use default generateSW strategy.

Do NOT use injectManifest strategy.

Do NOT create src/service-worker.ts.

---

## PWA Requirements

This project must support:

- Installable PWA
- Offline mode
- Service worker caching
- Offline fallback page
- Auto update service worker

---

## Cache Strategy

Cache First:
- images
- fonts
- static assets

Network First:
- API requests
- dynamic content

Stale While Revalidate:
- HTML pages

---

## File Responsibilities

src/routes/+layout.svelte  
→ root layout

src/routes/+page.svelte  
→ homepage

src/routes/offline/+page.svelte  
→ offline fallback page

vite.config.ts  
→ vite-plugin-pwa configuration and Workbox settings

---

## Manifest Rules

Manifest must include:

- name
- short_name
- theme_color
- background_color
- display: standalone
- start_url: /
- icons (192 and 512)

---

## Offline Behavior

When network is unavailable:

- App must still open
- Cached pages must work
- Offline page must display if content not cached

---

## What Copilot Should Do

Copilot should:

- Configure vite-plugin-pwa in vite.config.ts
- Use Workbox runtimeCaching
- Generate proper manifest
- Ensure offline support works
- Ensure install prompt works

Copilot must NOT create custom service worker file.

---

## Coding Style

Use this import style:

import { browser } from '$app/environment'

Use TypeScript everywhere.

Keep code clean and minimal.

Avoid unnecessary abstraction.

---

## Testing Goal

This is a test project.

Focus on:

- correctness
- clarity
- PWA functionality

Not production optimization yet.